<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WangRuxin | Personal Page</title>
  <meta name="description" content="WangRuxin personal page" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üßë‚Äçüíª</text></svg>">
  <style>
    :root{
      --bg:#e8f5e9; --fg:#0f172a; --sub:#475569; --muted:#e2e8f0; --card:#f8fafc; --link:#2563eb;
      --accent:#0ea5e9; --shadow:0 8px 30px rgba(2,6,23,0.08);
      --leaf1:#d97706; --leaf2:#b45309; --leaf3:#f59e0b; --leaf4:#92400e; --leaf5:#eab308;
      --trunkDark:#6e4a2f; --trunkMid:#8b5e3c; --trunkLight:#b98557;
      --treeLight:#b9f3c5; --treeMid:#7fd785; --treeDeep:#4caf50;
      --cursor-dot:#16a34a; --cursor-ring:#16a34a;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0f172a; --fg:#e5e7eb; --sub:#9ca3af; --muted:#1f2937; --card:#111827; --link:#86efac; --accent:#22c55e;
        --cursor-dot:#22c55e; --cursor-ring:#22c55e;
        --treeLight:#1b3a26; --treeMid:#255e39; --treeDeep:#2e6f43;
        --trunkDark:#5a3d28; --trunkMid:#704a30; --trunkLight:#8b5e3c;
      }
    }
    *{box-sizing:border-box}
    html, body {
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: var(--fg);
      font:16px/1.7 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "PingFang SC", "Noto Sans CJK SC", "Microsoft Yahei", sans-serif
    }
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    header{position:sticky;top:0;z-index:20;background:color-mix(in oklab, var(--bg) 85%, transparent);backdrop-filter:saturate(1.2) blur(10px);border-bottom:1px solid var(--muted)}
    nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700}
    .brand img{width:36px;height:36px;border-radius:50%;object-fit:cover;border:1px solid var(--muted)}
    .navlinks{display:flex;gap:18px;align-items:center}
    .navlinks a{padding:6px 10px;border-radius:10px}
    .navlinks a:hover{background:var(--muted)}
    .menu-btn{display:none}
    @media (max-width:820px){
      .navlinks{display:none}
      .menu-btn{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--muted);padding:6px 10px;border-radius:10px;background:transparent;color:var(--fg)}
      #drawer{display:block}
    }
    #drawer{display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);z-index:30}
    #drawer .panel{position:absolute;right:0;top:0;height:100%;width:78%;max-width:320px;background:var(--bg);padding:22px;border-left:1px solid var(--muted)}
    #drawer a{display:block;padding:10px 6px;border-radius:8px}
    #drawer a:hover{background:var(--muted)}
    .hero{display:grid;grid-template-columns:1.2fr 1fr;gap:24px;align-items:center;padding:42px 0}
    .hero-card{position:relative; background:var(--card);border:1px solid var(--muted);border-radius:18px;padding:22px;box-shadow:var(--shadow);overflow:hidden}
    .grid{display:grid;gap:20px}
    @media (min-width:901px){.grid-3{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:900px){.hero{grid-template-columns:1fr} }
    section{padding:28px 0; position:relative}
    h1,h2{line-height:1.2;margin:0}
    h2{font-size:26px;margin-bottom:10px}
    .card{position:relative; background:var(--card);border:1px solid var(--muted);border-radius:18px;padding:18px;box-shadow:var(--shadow);overflow:hidden}
    .list{list-style:none;margin:0;padding:0}
    .list li{padding:10px 0;border-bottom:1px dashed var(--muted)}
    .list li:last-child{border-bottom:none}
    .footer{padding:40px 0;border-top:1px solid var(--muted);font-size:14px;color:var(--sub)}
    .pill{display:inline-flex;align-items:center;gap:8px;background:var(--muted);padding:6px 10px;border-radius:999px}
    .right{margin-left:auto}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:var(--muted);padding:2px 6px;border-radius:6px;font-size:12px}
    .muted{color:var(--sub)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--muted);border-radius:10px;padding:8px 12px}
    .btn:hover{background:var(--muted)}
    .post-meta{font-size:13px;color:var(--sub)}
    .section-title{display:flex;align-items:center;gap:12px}
    .section-title .line{height:1px;flex:1;background:var(--muted)}
    .wrap{display:flex;flex-wrap:wrap;gap:10px}
    .pub{display:grid;grid-template-columns:auto 1fr;gap:12px}
    .pub-badge{font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--muted)}
    main, footer { position: relative; z-index: 1; }
    #bgcanvas { position: fixed; inset: 0; z-index: 0; pointer-events:none; display:block; }
    #fgcanvas { position: fixed; inset: 0; z-index: 3; pointer-events:none; display:block; }
    #leaves { position: fixed; inset: 0; z-index: 0; pointer-events:none; display:block; }
    body.use-custom-cursor{ cursor: none; }
    .cursor-ring{
      position: fixed;
      top:0; left:0;
      pointer-events:none;
      z-index:100000;
      --tf: translate(-50%,-50%);
      transform: var(--tf) scale(var(--scale,1));
      width:60px; height:60px; border-radius:50%;
      border: 1.5px dashed rgba(34,211,238,0.7);
      box-shadow: 0 0 12px rgba(34,211,238,.6), inset 0 0 20px rgba(74,222,128,.25);
      background: radial-gradient(circle, rgba(34,211,238,.15), transparent 70%);
      will-change: transform;
    }
    .cursor-ring::before{
      content:"";
      position:absolute; inset:-4px;
      border-radius:50%;
      border: 2px dashed rgba(34,211,238,0.9);
      box-shadow: 0 0 10px rgba(34,211,238,.45);
      animation: ring-rotate 4s linear infinite;
    }
    @keyframes ring-rotate{
      from{ transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .cursor-dot{
      position:absolute; inset:auto;
      top:50%; left:50%;
      transform: translate(-50%,-50%) scale(var(--scale,1));
      width:14px; height:14px;
    }
    .cursor-dot::before{
      content:"";
      position:absolute; inset:0;
      clip-path: polygon(50% 0%, 93% 25%, 93% 75%, 50% 100%, 7% 75%, 7% 25%);
      background: linear-gradient(145deg,#22d3ee,#4ade80);
      box-shadow: 0 0 6px #22d3ee, 0 0 12px #4ade80;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius:4px;
    }
    .cursor-hover .cursor-ring{ --scale:1.25; }
    .cursor-hover .cursor-dot { --scale:1.6; }
    .cursor-pulse .cursor-ring { animation: pulse .35s ease-out 1; }
    @keyframes pulse{
      0%{ transform: var(--tf) scale(var(--scale,1)); box-shadow: 0 0 0 2px rgba(34,197,94,.9), inset 0 0 0 rgba(34,197,94,.2); }
      100%{ transform: var(--tf) scale(calc(var(--scale,1)*1.6)); box-shadow: 0 0 0 0 rgba(34,197,94,0), inset 0 0 60px rgba(34,197,94,.25); }
    }
    .cat-near{
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 8px 26px rgba(0,0,0,.08), 0 0 0 2px rgba(34,197,94,.18);
      transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease;
    }
    @media (prefers-reduced-motion: reduce){
      #bgcanvas,#fgcanvas,#leaves{ display:none !important; }
      .cursor-ring{ display:none !important; }
      body{ cursor:auto !important; }
    }
    body.splash-lock { overflow:hidden; }
    #splash-intro{
      position:fixed; inset:0; z-index:99999; display:grid; place-items:center;
      background: radial-gradient(1400px 900px at 20% 10%, rgba(16,185,129,.06), transparent 60%),
                  radial-gradient(1400px 900px at 80% 90%, rgba(59,130,246,.08), transparent 60%),
                  #030712;
      color:#e5e7eb; transition: opacity .9s ease, visibility .9s ease;
    }
    #splash-intro.hidden{ opacity:0; visibility:hidden; pointer-events:none; }
    #splash-layer, #wind-layer{ position:absolute; inset:0; display:block; pointer-events:none; }
    #splash-layer{ z-index:0; } #wind-layer{ z-index:1; }
    .splash-text{ position:relative; z-index:2; text-align:center; user-select:none; letter-spacing:.6px; padding:0 16px; }
    .splash-title{ font-weight:900; font-size:clamp(26px, 6vw, 56px); text-transform:uppercase;
      text-shadow: 0 0 6px rgba(99,102,241,.9), 0 0 18px rgba(59,130,246,.75), 0 0 36px rgba(16,185,129,.55);
      filter: drop-shadow(0 4px 16px rgba(2,6,23,.45)); min-height: 1.4em; }
    .caret{ display:inline-block; width:0.8ch; margin-left:2px; border-right: 2px solid #22d3ee;
      filter: drop-shadow(0 0 8px rgba(34,211,238,.9)); animation: blink .9s steps(1,end) infinite; vertical-align:-3px; }
    @keyframes blink{ 0%,49%{opacity:1} 50%,100%{opacity:0} }
    .splash-sub{ margin-top:10px; font-size:clamp(12px, 2.6vw, 16px); opacity:.75; }
    #skip-btn{ position: fixed; right: 18px; bottom: 18px; z-index: 3;
      padding: 10px 14px; border-radius: 999px; font-weight:600;
      background: rgba(2,6,23,.6); color:#e5e7eb; border:1px solid rgba(148,163,184,.35);
      backdrop-filter: blur(6px) saturate(1.1); box-shadow: 0 6px 18px rgba(0,0,0,.25); cursor: pointer;
      transition: transform .15s ease, background-color .2s ease, box-shadow .2s ease; }
    #skip-btn:hover{ transform: translateY(-1px); background: rgba(2,6,23,.72); }
    #skip-btn:active{ transform: translateY(0); }
  </style>
</head>
<body>
  <div id="splash-intro" role="dialog" aria-label="intro animation">
    <canvas id="splash-layer"></canvas>
    <canvas id="wind-layer"></canvas>
    <div class="splash-text">
      <div class="splash-title">
        <span id="type-target"></span><span class="caret" aria-hidden="true"></span>
      </div>
      <div class="splash-sub">Be someone with a mind of their own</div>
    </div>
    <button id="skip-btn" type="button" aria-label="skip intro">Skip ‚ñ∏</button>
  </div>
  <canvas id="bgcanvas" aria-hidden="true"></canvas>
  <canvas id="fgcanvas" aria-hidden="true"></canvas>
  <canvas id="leaves" aria-hidden="true"></canvas>
  <div class="cursor-ring" aria-hidden="true">
    <div class="cursor-dot" aria-hidden="true"></div>
  </div>
  <header>
    <div class="container">
      <nav>
        <div class="brand">
          <img src="https://avatars.githubusercontent.com/u/9919" alt="avatar" />
          <span>Ruxin Wang</span>
        </div>
        <div class="navlinks">
          <a href="#about">About</a>
          <a href="#pubs">Publications</a>
          <a href="#contact">Contact</a>
        </div>
        <button id="open" class="menu-btn">ËèúÂçï ‚ñæ</button>
      </nav>
    </div>
  </header>
  <div id="drawer" aria-hidden="true">
    <div class="panel">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px">
        <strong>ÂØºËà™</strong>
        <button id="close" class="btn">ÂÖ≥Èó≠</button>
      </div>
      <a href="#about">About</a>
      <a href="#pubs">Publications</a>
      <a href="#projects">Projects</a>
      <a href="#contact">Contact</a>
    </div>
  </div>
  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1 style="font-size:32px">Hello, I am <span style="color:var(--accent);font-weight:800)">Ruxin Wang(ÁéãÊ±ùÂøÉ)</span></h1>
        <p class="muted">I am currently pursuing a Ph.D. degree at Shanghai Jiao Tong University.</p>
        <div class="wrap" style="margin-top:14px">
          <a class="btn" href="https://orcid.org/0009-0007-7156-2173/print"> Download CV</a>
          <a class="btn" href="https://scholar.google.com/citations?hl=zh-CN&user=GtrRzRkAAAAJ" target="_blank" rel="noreferrer">Google Scholar</a>
          <a class="btn" href="https://github.com/toolnail" target="_blank" rel="noreferrer">GitHub</a>
        </div>
      </div>
      <div class="hero-card">
        <img src="https://toolnail.github.io/personal_photo_beijing.jpg" alt="cover" style="width:100%;height:auto;border-radius:12px;margin-top:8px;border:1px solid var(--muted)"/>
      </div>
    </section>
    <section id="about">
      <div class="section-title"><h2>About Me</h2><div class="line"></div></div>
      <div class="card">
        <p>I am currently pursuing a Ph.D. degree at Shanghai Jiao Tong University (SJTU).
           Prior to that, I received the B.Eng. degree in Telecommunication Engineering from Xidian University (XDU) in 2025.</p>
      </div>
    </section>
    <section id="publications">
      <div class="section-title"><h2>Publications</h2><div class="line"></div></div>
      <div class="card">
        <ul class="list">
          <li>
            <a href="https://ieeexplore.ieee.org/abstract/document/11142870" target="_blank">
              Progressive Integrated Access and Backhaul Network Augmentation
            </a>
            <div class="post-meta">
              Xipeng Zhang; Fei Du; Zhong Liu; Xinyi Chen; <strong>Ruxin Wang</strong>; Yibo Pi<br>
              IEEE Communications Letters, 2025
            </div>
          </li>
        </ul>
      </div>
    </section>
    <section id="contact">
      <div class="section-title"><h2>Contact</h2><div class="line"></div></div>
      <div class="card">
        <p><strong>EmailÔºö</strong>wangruxin@sjtu.edu.cn</p>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div class="container" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <span>¬© <span id="y"></span> WangRuxin</span>
    </div>
  </footer>
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    function css(v){ return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }
    function setupCanvas(canvas){
      const ctx = canvas.getContext('2d');
      function resize(){
        const DPR = Math.max(1, Math.min(window.devicePixelRatio||1, 2));
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.floor(rect.width * DPR);
        canvas.height = Math.floor(rect.height * DPR);
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      const ro = new ResizeObserver(resize); ro.observe(canvas);
      resize();
      return ctx;
    }
    (function(){
      const canvas = document.getElementById("leaves");
      const ctx = canvas.getContext("2d");
      let W, H, DPR;
      const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function resize() {
        DPR = Math.max(1, Math.min(window.devicePixelRatio || 1, 2));
        W = canvas.width = Math.floor(window.innerWidth * DPR);
        H = canvas.height = Math.floor(window.innerHeight * DPR);
        canvas.style.width = window.innerWidth + "px";
        canvas.style.height = window.innerHeight + "px";
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      }
      window.addEventListener("resize", resize, { passive: true });
      resize();
      const COLORS = [css('--leaf1'),css('--leaf2'),css('--leaf3'),css('--leaf4'),css('--leaf5')];
      const leaves = [];
      const BASE_COUNT = 36;
      const DENSITY = Math.max(1, Math.min(1.0, window.innerWidth / 1200));
      const leafCount = Math.floor(BASE_COUNT * DENSITY);
      class Leaf {
        constructor() { this.reset(true); }
        reset(initial=false) {
          this.size = 16 + Math.random()*18;
          this.x = Math.random()*window.innerWidth;
          this.y = initial ? Math.random()*window.innerHeight : -this.size - Math.random()*window.innerHeight*0.2;
          this.speedY = 0.6 + Math.random()*1.6;
          this.swing = 1.2 + Math.random()*2.0;
          this.baseAngle = Math.random()*Math.PI*2;
          this.angle = Math.random()*Math.PI*2;
          this.angularSpeed = (Math.random()*0.02 - 0.01);
          this.color = COLORS[(Math.random()*COLORS.length)|0];
          this.skew = 0.3 + Math.random()*0.7;
          this.alpha = 0.9;
        }
        update(t) {
          this.y += this.speedY;
          this.angle += this.angularSpeed;
          this.x += Math.sin(t*0.001 + this.baseAngle) * this.swing * 0.6;
          if (this.y > window.innerHeight + this.size*1.2) this.reset(false);
        }
        draw(ctx) {
          ctx.save();
          ctx.globalAlpha = this.alpha;
          ctx.translate(this.x, this.y);
          ctx.rotate(this.angle);
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.ellipse(0, 0, this.size*0.55, this.size, 0, 0, Math.PI*2);
          ctx.fill();
          ctx.globalAlpha = this.alpha * 0.15;
          ctx.strokeStyle = "#000";
          ctx.beginPath();
          ctx.moveTo(0, -this.size);
          ctx.lineTo(0, this.size);
          ctx.stroke();
          ctx.restore();
        }
      }
      for (let i=0;i<leafCount;i++) leaves.push(new Leaf());
      let rafId = null;
      function animate(t){
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        for (const leaf of leaves){
          leaf.update(t||0);
          leaf.draw(ctx);
        }
        rafId = requestAnimationFrame(animate);
      }
      if (!reduceMotion){
        animate(0);
        document.addEventListener("visibilitychange", ()=>{
          if (document.hidden){ if (rafId) cancelAnimationFrame(rafId); rafId=null; }
          else if (!rafId){ rafId=requestAnimationFrame(animate); }
        });
      }
    })();
    /*(function(){
      const bg = document.getElementById('bgcanvas');
      const ctx = bg.getContext('2d');
      function resize(){
        const DPR = Math.max(1, Math.min(window.devicePixelRatio||1, 2));
        bg.width = Math.floor(window.innerWidth * DPR);
        bg.height = Math.floor(window.innerHeight * DPR);
        bg.style.width = window.innerWidth + 'px';
        bg.style.height = window.innerHeight + 'px';
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      window.addEventListener('resize', resize, {passive:true});
      resize();
      const TREE_SIDE_MAX_W = 180;
      function drawTrunk({x, baseY, trunkW, height, side}){
        const g = ctx.createLinearGradient(x, baseY-height, x, baseY);
        g.addColorStop(0, css('--trunkLight')); g.addColorStop(0.5, css('--trunkMid')); g.addColorStop(1, css('--trunkDark'));
        ctx.save(); ctx.fillStyle = g; ctx.beginPath();
        const topX = x + (side==='left' ? -trunkW*0.25 : trunkW*0.25), topW = trunkW*0.5;
        ctx.moveTo(x - trunkW*0.5, baseY);
        ctx.quadraticCurveTo(x - trunkW*0.45, baseY - height*0.5, topX - topW*0.5, baseY - height);
        ctx.lineTo(topX + topW*0.5, baseY - height);
        ctx.quadraticCurveTo(x + trunkW*0.45, baseY - height*0.5, x + trunkW*0.5, baseY);
        ctx.closePath(); ctx.fill(); ctx.restore();
      }
      function drawSideFoliage(sideW){
        const L2 = css('--treeMid'), L3 = css('--treeDeep');
        const drawCluster = (cx, cy, r, alpha, color)=>{
          ctx.save(); ctx.globalAlpha = alpha; ctx.fillStyle = color; ctx.beginPath();
          for(let i=0;i<7;i++){ const t=(i/7)*Math.PI*2; ctx.ellipse(cx + Math.cos(t)*r*0.9, cy + Math.sin(t)*r*0.7, r*0.65, r, 0, 0, Math.PI*2); }
          ctx.fill(); ctx.restore();
        };
        const h = Math.min(0.98*window.innerHeight, 760);
        drawCluster(sideW*0.45, window.innerHeight - h + 80, sideW*0.8, 0.20, L3);
        drawCluster(sideW*0.55, window.innerHeight - h + 140, sideW*0.7, 0.14, L2);
        drawCluster(window.innerWidth - sideW*0.45, window.innerHeight - h + 100, sideW*0.8, 0.20, L3);
        drawCluster(window.innerWidth - sideW*0.55, window.innerHeight - h + 160, sideW*0.7, 0.14, L2);
      }
      function draw(){
        ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        const vw = window.innerWidth;
        const sideW = Math.min(TREE_SIDE_MAX_W, Math.max(110, vw*0.12));
        if (vw >= 760){
          const height = Math.min(0.98*window.innerHeight, 760);
          const baseY = window.innerHeight + 60;
          drawTrunk({x: sideW*0.55, baseY, trunkW: sideW*0.38, height, side:'left'});
          drawTrunk({x: window.innerWidth - sideW*0.55, baseY, trunkW: sideW*0.38, height, side:'right'});
          drawSideFoliage(sideW);
        }
        requestAnimationFrame(draw);
      }
      draw();
    })();
    */
    (function(){
      const fg = document.getElementById('fgcanvas');
      const ctx = fg.getContext('2d');
      function resize(){
        const DPR = Math.max(1, Math.min(window.devicePixelRatio||1, 2));
        fg.width = Math.floor(window.innerWidth * DPR);
        fg.height = Math.floor(window.innerHeight * DPR);
        fg.style.width = window.innerWidth+'px';
        fg.style.height = window.innerHeight+'px';
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      window.addEventListener('resize', resize, {passive:true});
      resize();
      const mergeSelectors = ['.btn','a[href]','img','.card','header nav a','.hero-card'];
      const mergeEls = Array.from(document.querySelectorAll(mergeSelectors.join(',')));
      const CAT = {
        size: 46,
        x: window.innerWidth * 0.75,
        y: window.innerHeight * 0.65,
        vx: 0, vy: 0,
        maxSpeed: 4.0,
        accel: 0.20,
        friction: 0.90,
        angle: 0,
        state: 'chase',
        cuddleRadius: 64,
        cuddleUntil: 0,
      };
      let mouseX = window.innerWidth/2, mouseY = window.innerHeight/2;
      window.addEventListener('mousemove', (e)=>{ mouseX=e.clientX; mouseY=e.clientY; }, {passive:true});
      function updateCat(now){
        const dx = mouseX - CAT.x, dy = mouseY - CAT.y;
        const dist = Math.hypot(dx, dy) || 1;
        if (dist <= CAT.cuddleRadius){ CAT.state = 'cuddle'; CAT.cuddleUntil = now + 650; }
        else if (now > CAT.cuddleUntil){ CAT.state = 'chase'; }
        let tx = mouseX, ty = mouseY;
        if (CAT.state === 'cuddle'){ tx = mouseX - 18; ty = mouseY + 10; }
        const ddx = tx - CAT.x, ddy = ty - CAT.y;
        const d = Math.hypot(ddx, ddy) || 1;
        const slow = Math.min(1, d / 120);
        const ax = (ddx/d) * CAT.accel * slow;
        const ay = (ddy/d) * CAT.accel * slow;
        if (CAT.state === 'cuddle'){ CAT.vx = (CAT.vx + ax) * 0.85; CAT.vy = (CAT.vy + ay) * 0.85; }
        else { CAT.vx = (CAT.vx + ax) * CAT.friction; CAT.vy = (CAT.vy + ay) * CAT.friction; }
        const sp = Math.hypot(CAT.vx, CAT.vy);
        const maxV = (CAT.state === 'cuddle') ? 1.2 : CAT.maxSpeed;
        if (sp > maxV){ CAT.vx = CAT.vx/sp*maxV; CAT.vy = CAT.vy/sp*maxV; }
        CAT.x += CAT.vx; CAT.y += CAT.vy;
        CAT.angle = Math.atan2(CAT.vy, CAT.vx);
        const pad = CAT.size * 0.8;
        if (CAT.x < pad){ CAT.x = pad; CAT.vx = Math.abs(CAT.vx)*0.6; }
        if (CAT.x > window.innerWidth - pad){ CAT.x = window.innerWidth - pad; CAT.vx = -Math.abs(CAT.vx)*0.6; }
        if (CAT.y < pad){ CAT.y = pad; CAT.vy = Math.abs(CAT.vy)*0.6; }
        if (CAT.y > window.innerHeight - pad){ CAT.y = window.innerHeight - pad; CAT.vy = -Math.abs(CAT.vy)*0.6; }
      }
      function drawCat(now){
        const s = CAT.size;
        ctx.save();
        ctx.translate(CAT.x, CAT.y);
        let headNod = 0, headShiftX = 0;
        if (CAT.state === 'cuddle'){
          headNod = Math.sin(now*0.02) * (s*0.03);
          headShiftX = Math.sin(now*0.015) * (s*0.04);
        }
        ctx.rotate(CAT.angle);
        const orange = '#f59e0b', orangeDeep = '#d97706', belly = '#fde68a', earPink = '#f8c3b5', eye = '#222';
        ctx.globalAlpha = 0.18;
        ctx.fillStyle = '#000';
        ctx.beginPath();
        ctx.ellipse(-4, s*0.72, s*0.6, s*0.22, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.globalAlpha = 1;
        const speedFactor = Math.hypot(CAT.vx, CAT.vy);
        const wag = Math.sin(now*0.012) * (CAT.state==='cuddle' ? 4 : Math.min(12, speedFactor*2.2));
        ctx.strokeStyle = orangeDeep;
        ctx.lineWidth = Math.max(6, s*0.12);
        ctx.lineCap = 'round';
        ctx.beginPath();
        ctx.moveTo(-s*0.1, s*0.15);
        ctx.quadraticCurveTo(-s*0.55, s*0.05 + wag*0.2, -s*0.7, -s*0.05 + wag);
        ctx.stroke();
        ctx.fillStyle = orange;
        ctx.beginPath();
        ctx.ellipse(0, 0, s*0.7, s*0.5, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.fillStyle = belly;
        ctx.beginPath();
        ctx.ellipse(s*0.1, s*0.05, s*0.35, s*0.28, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.strokeStyle = orangeDeep; ctx.lineWidth = 3;
        for (let i=-1;i<=1;i++){
          ctx.beginPath(); ctx.moveTo(-s*0.05 + i*s*0.15, -s*0.25); ctx.lineTo(-s*0.15 + i*s*0.15, -s*0.05); ctx.stroke();
        }
        ctx.save();
        ctx.translate(s*0.55, -s*0.05);
        ctx.fillStyle = orange;
        ctx.beginPath();
        ctx.ellipse(0, 0, s*0.36, s*0.3, 0, 0, Math.PI*2);
        ctx.fill();
        ctx.fillStyle = eye;
        if (CAT.state === 'cuddle'){
          ctx.strokeStyle = eye; ctx.lineWidth = 2;
          ctx.beginPath(); ctx.moveTo(-s*0.08, -s*0.05); ctx.lineTo(0, -s*0.05); ctx.stroke();
          ctx.beginPath(); ctx.moveTo(s*0.06, -s*0.05); ctx.lineTo(s*0.16, -s*0.05); ctx.stroke();
        }else{
          ctx.beginPath();
          ctx.ellipse(-s*0.04, -s*0.05, s*0.04, s*0.05, 0, 0, Math.PI*2);
          ctx.ellipse(s*0.10, -s*0.05, s*0.04, s*0.05, 0, 0, Math.PI*2);
          ctx.fill();
        }
        ctx.fillStyle = '#ef4444';
        ctx.beginPath(); ctx.ellipse(s*0.03, s*0.02, s*0.02, s*0.015, 0, 0, Math.PI*2); ctx.fill();
        ctx.restore();
        ctx.restore();
      }
      function applyMergeEffects(){
        const R = 90;
        for(const el of mergeEls){
          const rect = el.getBoundingClientRect();
          const cx = rect.left + rect.width/2;
          const cy = rect.top + rect.height/2;
          const dx = cx - CAT.x, dy = cy - CAT.y;
          const dist = Math.hypot(dx, dy);
          if (dist < R) el.classList.add('cat-near');
          else el.classList.remove('cat-near');
        }
      }
      function animate(t){
        ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        updateCat(t||0);
        drawCat(t||0);
        applyMergeEffects();
        requestAnimationFrame(animate);
      }
      animate(0);
    })();
    (function(){
      const ring = document.querySelector('.cursor-ring');
      if(!ring) return;
      const finePointer = window.matchMedia('(pointer: fine)').matches;
      if(!finePointer) return;
      document.body.classList.add('use-custom-cursor');
      let x=window.innerWidth/2, y=window.innerHeight/2, rx=x, ry=y;
      window.addEventListener('mousemove', e => { x = e.clientX; y = e.clientY; }, {passive:true});
      function loop(){
        rx += (x - rx) * 0.18;
        ry += (y - ry) * 0.18;
        const tf = `translate(${rx}px, ${ry}px) translate(-50%, -50%)`;
        ring.style.setProperty('--tf', tf);
        requestAnimationFrame(loop);
      }
      loop();
      const hoverables=['a','button','[role="button"]','.btn','input','select','textarea','summary','label'];
      document.addEventListener('mouseover', e=>{ if(hoverables.some(sel=>e.target.closest(sel))) document.body.classList.add('cursor-hover'); });
      document.addEventListener('mouseout', e=>{ if(hoverables.some(sel=>e.target.closest(sel))) document.body.classList.remove('cursor-hover'); });
      document.addEventListener('mousedown', ()=>{ document.body.classList.add('cursor-pulse'); setTimeout(()=>document.body.classList.remove('cursor-pulse'), 350); });
    })();
    (function(){
      const drawer = document.getElementById('drawer');
      const openBtn = document.getElementById('open');
      const closeBtn = document.getElementById('close');
      if(openBtn && drawer){ openBtn.addEventListener('click', ()=>{ drawer.style.display='block'; }); }
      if(closeBtn && drawer){ closeBtn.addEventListener('click', ()=>{ drawer.style.display='none'; }); }
      drawer?.addEventListener('click', (e)=>{ if(e.target===drawer) drawer.style.display='none'; });
    })();
    (function(){
      const SPLASH_DURATION = 10000;
      const TYPE_DELAY_MS = 1500;
      const TYPE_SPEED_MS = 38;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const duration = prefersReduced ? 1200 : SPLASH_DURATION;
      const typeDelay = prefersReduced ? 300 : TYPE_DELAY_MS;
      const typeSpeed = prefersReduced ? 10 : TYPE_SPEED_MS;
      const splash = document.getElementById('splash-intro');
      const jungle = document.getElementById('splash-layer');
      const wind = document.getElementById('wind-layer');
      const typeEl = document.getElementById('type-target');
      const skipBtn= document.getElementById('skip-btn');
      if (!splash || !jungle || !wind || !typeEl || !skipBtn) return;
      document.body.classList.add('splash-lock');
      const jctx = jungle.getContext('2d');
      const wctx = wind.getContext('2d');
      function resize(){
        const DPR = Math.max(1, Math.min(window.devicePixelRatio||1, 2));
        for (const c of [jungle, wind]){
          c.width = Math.floor(window.innerWidth * DPR);
          c.height = Math.floor(window.innerHeight * DPR);
          c.style.width = window.innerWidth + 'px';
          c.style.height = window.innerHeight + 'px';
        }
        jctx.setTransform(DPR,0,0,DPR,0,0);
        wctx.setTransform(DPR,0,0,DPR,0,0);
      }
      window.addEventListener('resize', resize, {passive:true}); resize();
      const leaves = [];
      const vines = [];
      const COLORS = [css('--leaf1'),css('--leaf2'),css('--leaf3'),css('--leaf4'),css('--leaf5')];
      function rand(a,b){ return a + Math.random()*(b-a); }
      function spawnVines(){
        vines.length = 0;
        const count = Math.round(Math.max(6, Math.min(18, window.innerWidth/120)));
        for (let i=0;i<count;i++){
          vines.push({
            x: rand(-80, window.innerWidth+80),
            y: rand(-60, 60),
            len: rand(window.innerHeight*0.5, window.innerHeight*0.9),
            wiggle: rand(0.6, 1.2),
            thick: rand(2, 4),
            hue: rand(90, 150)
          });
        }
      }
      function spawnLeaves(){
        leaves.length = 0;
        const density = Math.round(Math.max(120, Math.min(260, window.innerWidth*window.innerHeight/40_000)));
        for (let i=0;i<density;i++){
          leaves.push({
            x: Math.random()*window.innerWidth,
            y: Math.random()*window.innerHeight,
            r: rand(6, 18),
            vx: rand(-0.2, 0.2),
            vy: rand(0.1, 0.6),
            sway: rand(0.2, 0.8),
            a: rand(0, Math.PI*2),
            rot: rand(-0.02, 0.02),
            c: COLORS[(Math.random()*COLORS.length)|0],
            alpha: rand(0.6, 0.95)
          });
        }
      }
      spawnVines(); spawnLeaves();
      let windPower = 0; let gustTarget = 0;
      const GUST_START = Math.max(2000, SPLASH_DURATION*0.55);
      const GUST_END = Math.min(SPLASH_DURATION-1800, GUST_START+1800);
      function scheduleGust(t){
        if (t > GUST_START && t < GUST_END){ gustTarget = 1; }
        else if (t >= GUST_END){ gustTarget = 0; }
        windPower += (gustTarget - windPower)*0.03;
      }
      function drawVines(t){
        jctx.save();
        for (const v of vines){
          jctx.strokeStyle = `hsl(${v.hue} 40% 20% / 0.85)`;
          jctx.lineWidth = v.thick;
          jctx.beginPath();
          jctx.moveTo(v.x, v.y);
          const seg = 10;
          for (let i=1;i<=seg;i++){
            const p = i/seg;
            const sway = Math.sin(t*0.001 + p*8 + v.x*0.01) * v.wiggle * (1+windPower*1.6);
            const xx = v.x + sway*30*p + windPower*20*p;
            const yy = v.y + v.len*p;
            jctx.lineTo(xx, yy);
          }
          jctx.stroke();
        }
        jctx.restore();
      }
      function drawLeaf(l){
        jctx.save();
        jctx.globalAlpha = l.alpha;
        jctx.translate(l.x, l.y);
        jctx.rotate(l.a);
        jctx.fillStyle = l.c;
        jctx.beginPath();
        jctx.ellipse(0,0,l.r*0.6,l.r,0,0,Math.PI*2);
        jctx.fill();
        jctx.restore();
      }
      function updateLeaves(){
        for (const L of leaves){
          L.vx += windPower*0.35 + Math.sin(L.a*3)*0.02;
          L.vy += Math.sin(L.a*2)*0.005;
          L.x += L.vx; L.y += L.vy;
          L.a += L.rot + windPower*0.02;
          if (L.x > window.innerWidth + 40) L.x = -40;
          if (L.y > window.innerHeight + 20){ L.y = -20; L.x = rand(-20, window.innerWidth+20); }
        }
      }
      function drawWindTrails(){
        const lines = Math.round(6 + windPower*22);
        wctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        wctx.save();
        wctx.globalAlpha = 0.15 + windPower*0.25;
        wctx.lineWidth = 2 + windPower*2;
        wctx.strokeStyle = `rgba(125,211,252,${0.35 + windPower*0.4})`;
        for (let i=0;i<lines;i++){
          const y = Math.random()*window.innerHeight;
          const len = 80 + Math.random()*240 * (1+windPower);
          wctx.beginPath();
          wctx.moveTo(-50, y + Math.sin(y*0.02 + performance.now()*0.002)*6);
          wctx.quadraticCurveTo(len*0.3, y-10, len, y+5);
          wctx.stroke();
        }
        wctx.restore();
      }
      let start = performance.now();
      function loop(now){
        const t = now - start;
        scheduleGust(t);
        jctx.clearRect(0,0,window.innerWidth,window.innerHeight);
        drawVines(now);
        updateLeaves();
        for (const L of leaves) drawLeaf(L);
        drawWindTrails();
        if (!document.getElementById('splash-intro').classList.contains('hidden')) requestAnimationFrame(loop);
      }
      requestAnimationFrame(loop);
      const FULL_TEXT = "Welcome to WangRuxin personal page";
      function typeWriter(text, el, startDelay=0, speed=36){
        el.textContent = "";
        const beginAt = performance.now() + startDelay;
        let idx = 0;
        function step(now){
          if (now < beginAt){ requestAnimationFrame(step); return; }
          if (idx <= text.length){
            el.textContent = text.slice(0, idx);
            idx++;
            setTimeout(()=>requestAnimationFrame(step), speed);
          }
        }
        requestAnimationFrame(step);
      }
      setTimeout(()=> typeWriter(FULL_TEXT, document.getElementById('type-target'), 0, 38), 1500);
      function hideSplash(){
        const splash = document.getElementById('splash-intro');
        if (splash.classList.contains('hidden')) return;
        splash.classList.add('hidden');
        document.body.classList.remove('splash-lock');
        setTimeout(()=> splash.remove(), 900);
      }
      const timer = setTimeout(hideSplash, 10000);
      document.getElementById('skip-btn').addEventListener('click', () => {
        clearTimeout(timer);
        hideSplash();
      }, {once:true});
    })();
  </script>
</body>
</html>
